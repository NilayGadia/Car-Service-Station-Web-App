{"ast":null,"code":"import _objectSpread from\"/home/sanket/Downloads/Client/Client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/sanket/Downloads/Client/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sanket/Downloads/Client/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sanket/Downloads/Client/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{getAppointmentByOutletId,updateAppointmentStatus}from'./services/user';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminDashboard=function AdminDashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),appointments=_useState2[0],setAppointments=_useState2[1];var outletId=sessionStorage.getItem('outletId');var history=useHistory();useEffect(function(){var fetchAppointments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAppointmentByOutletId(outletId);case 3:response=_context.sent;console.log(\"Appointment details:\",response.data);setAppointments(response.data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching appointments:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchAppointments(){return _ref.apply(this,arguments);};}();fetchAppointments();},[outletId]);var updateStatus=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return updateAppointmentStatus(id,true);case 3:// Pass true as the new status\n// Update status in the state\nsetAppointments(function(prevAppointments){return prevAppointments.map(function(appointment){return appointment.appointmentId===id?_objectSpread(_objectSpread({},appointment),{},{status:true})// Update status to true\n:appointment;});});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(\"Error updating status:\",_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function updateStatus(_x){return _ref2.apply(this,arguments);};}();var getStatusColor=function getStatusColor(status){return status?'text-success':'text-danger';};var navigateToPayments=function navigateToPayments(){// Navigate to the payments page\nhistory.push('/PaymentList');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:navigateToPayments,children:\"View Payments\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Car Manufacturer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Car Model\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:appointments.map(function(appointment){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:appointment.appointmentDate}),/*#__PURE__*/_jsx(\"td\",{children:appointment.appointmentTime}),/*#__PURE__*/_jsxs(\"td\",{children:[appointment.user.fname,\" \",appointment.user.lname]}),/*#__PURE__*/_jsx(\"td\",{children:appointment.manufacturer.manufacturerName}),/*#__PURE__*/_jsx(\"td\",{children:appointment.model.modelName}),/*#__PURE__*/_jsx(\"td\",{className:getStatusColor(appointment.status),children:appointment.status?'Serviced':'Pending'}),/*#__PURE__*/_jsx(\"td\",{children:!appointment.status&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return updateStatus(appointment.appointmentId);},children:\"Mark as Serviced\"})})]},appointment.appointmentId);})})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","getAppointmentByOutletId","updateAppointmentStatus","useHistory","jsx","_jsx","jsxs","_jsxs","AdminDashboard","_useState","_useState2","_slicedToArray","appointments","setAppointments","outletId","sessionStorage","getItem","history","fetchAppointments","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","console","log","data","t0","error","stop","apply","arguments","updateStatus","_ref2","_callee2","id","_callee2$","_context2","prevAppointments","map","appointment","appointmentId","_objectSpread","status","_x","getStatusColor","navigateToPayments","push","className","children","onClick","appointmentDate","appointmentTime","user","fname","lname","manufacturer","manufacturerName","model","modelName"],"sources":["/home/sanket/Downloads/Client/Client/src/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAppointmentByOutletId, updateAppointmentStatus } from './services/user';\nimport { useHistory  } from 'react-router-dom';\n\nconst AdminDashboard = () => {\n  const [appointments, setAppointments] = useState([]);\n\n  const outletId = sessionStorage.getItem('outletId');\n\n  const history = useHistory()\n\n  useEffect(() => {\n    const fetchAppointments = async () => {\n      try {\n        const response = await getAppointmentByOutletId(outletId);\n        console.log(\"Appointment details:\", response.data);\n        setAppointments(response.data);\n      } catch (error) {\n        console.error(\"Error fetching appointments:\", error);\n      }\n    };\n\n    fetchAppointments();\n  }, [outletId]);\n\n  const updateStatus = async (id) => {\n    try {\n      // Update status in the database\n      await updateAppointmentStatus(id, true); // Pass true as the new status\n\n      // Update status in the state\n      setAppointments((prevAppointments) =>\n        prevAppointments.map((appointment) =>\n          appointment.appointmentId === id\n            ? { ...appointment, status: true } // Update status to true\n            : appointment\n        )\n      );\n    } catch (error) {\n      console.error(\"Error updating status:\", error);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    return status ? 'text-success' : 'text-danger';\n  };\n\n  const navigateToPayments = () => {\n    // Navigate to the payments page\n    history.push('/PaymentList');\n  };\n\n  return (\n    <div className=\"container mt-5\">\n        <div className=\"d-flex justify-content-end mb-3\">\n        <button className=\"btn btn-primary\" onClick={navigateToPayments}>\n          View Payments\n        </button>\n      </div>\n      <h1 className=\"mb-4\">Admin Dashboard</h1>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>Date</th>\n            <th>Time</th>\n            <th>Username</th>\n            <th>Car Manufacturer</th>\n            <th>Car Model</th>\n            <th>Status</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {appointments.map((appointment) => (\n            <tr key={appointment.appointmentId}>\n              <td>{appointment.appointmentDate}</td>\n              <td>{appointment.appointmentTime}</td>\n              <td>{appointment.user.fname} {appointment.user.lname}</td>\n              <td>{appointment.manufacturer.manufacturerName}</td>\n              <td>{appointment.model.modelName}</td>\n              <td className={getStatusColor(appointment.status)}>\n                {appointment.status ? 'Serviced' : 'Pending'}\n              </td>\n              <td>\n                {!appointment.status && (\n                  <button\n                    className=\"btn btn-success\"\n                    onClick={() => updateStatus(appointment.appointmentId)}\n                  >\n                    Mark as Serviced\n                  </button>\n                )}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}